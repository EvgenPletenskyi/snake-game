var typedSignals=function(s){"use strict";class h{constructor(t){this.link=t}disconnect(){return this.link.unlink()}set enabled(t){this.link.setEnabled(t)}get enabled(){return this.link.isEnabled()}}class l{constructor(t,n,e){this.enabled=!0,this.newLink=!1,this.prev=t??this,this.next=n??this,this.order=e.order,this.isPublic=e.isPublic,this.callback=e.callback,this.onUnlink=e.onUnlink}isEnabled(){return this.enabled&&!this.newLink}setEnabled(t){this.enabled=t}unlink(){return this.callback?(delete this.callback,this.next.prev=this.prev,this.prev.next=this.next,this.onUnlink(),!0):!1}insert(t){const{order:n}=t;let e=this.prev;for(;e!==this&&!(e.order<=n);)e=e.prev;const i=new l(e,e.next,t);return e.next=i,i.next.prev=i,i}}const a={order:0,isPublic:!0,onUnlink(){}};class r{constructor(){this.head=new l(null,null,a),this.hasNewLinks=!1,this.emitDepth=0,this.connectionsCount=0,this.onUnlink=()=>{this.connectionsCount--}}getConnectionsCount(){return this.connectionsCount}hasConnections(){return this.connectionsCount>0}connect(t,{order:n=0,isPublic:e=!0}={}){this.connectionsCount++;const i=this.head.insert({callback:t,order:n,isPublic:e,onUnlink:this.onUnlink});return this.emitDepth>0&&(this.hasNewLinks=!0,i.newLink=!0),new h(i)}disconnect(t){for(let n=this.head.next;n!==this.head;n=n.next)if(n.callback===t)return n.unlink(),!0;return!1}disconnectAll(){let{next:t}=this.head;for(;t!==this.head;)t.isPublic&&t.unlink(),t=t.next}emit(...t){this.emitDepth++;for(let n=this.head.next;n!==this.head;n=n.next)n.isEnabled()&&n.callback&&n.callback.apply(null,t);this.emitDepth--,this.unsetNewLink()}emitCollecting(t,n){this.emitDepth++;for(let e=this.head.next;e!==this.head;e=e.next)if(e.isEnabled()&&e.callback){const i=e.callback.apply(null,n);if(!t.handleResult(i))break}this.emitDepth--,this.unsetNewLink()}unsetNewLink(){if(this.hasNewLinks&&this.emitDepth===0){for(let t=this.head.next;t!==this.head;t=t.next)t.newLink=!1;this.hasNewLinks=!1}}}return s.Signal=r,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),s}({});
